"use strict";(function(){jQuery(document).ready(function(i){var o,u,e,s;return i("form#order_review").submit(function(){return i(this).hasClass("credit-card")?s(i(this)):i(this).hasClass("echeck")?e(i(this)):void 0}),s=function(e){var s,a,c,r,_,n,t;return!e.is(".processing")&&(_=[],a=(s=i(".payment_method_cybersource_sa_sop_credit_card")).find(".js-wc-payment-gateway-account-number").val(),c=s.find(".js-wc-payment-gateway-csc").val(),n=s.find(".js-wc-payment-gateway-card-exp-month").val(),t=s.find(".js-wc-payment-gateway-card-exp-year").val(),(a=a.replace(/-|\s/g,""))?((a.length<12||19<a.length)&&_.push(wc_cybersource_sa_sop_params.card_number_length_invalid),/\D/.test(a)&&_.push(wc_cybersource_sa_sop_params.card_number_digits_invalid),o(a)||_.push(wc_cybersource_sa_sop_params.card_number_invalid)):_.push(wc_cybersource_sa_sop_params.card_number_missing),r=(new Date).getFullYear(),(/\D/.test(n)||/\D/.test(t)||12<n||n<1||t<r||r+20<t)&&_.push(wc_cybersource_sa_sop_params.card_exp_date_invalid),void 0!==c&&(c?(/\D/.test(c)&&_.push(wc_cybersource_sa_sop_params.cvv_digits_invalid),(c.length<3||4<c.length)&&_.push(wc_cybersource_sa_sop_params.cvv_length_invalid)):_.push(wc_cybersource_sa_sop_params.cvv_missing)),0<_.length?(u(e,_),!1):(s.find(".js-wc-payment-gateway-card-exp-date").val(n+"-"+t),s.find(".js-wc-payment-gateway-account-number").val(a),!0))},o=function(e){var s,a,c,r,_;for(s=a=r=0,c=e.length-2;0<=c?a<=c:c<=a;s=0<=c?++a:--a)r+=(_=parseInt(e.substr(e.length-(s+2),1)*(2-s%2)))<10?_:_-9;return e.substr(e.length-1)===((10-r%10)%10).toString()},e=function(e){var s,a,c,r,_,n,t;return!e.is(".processing")&&(n=[],t=(a=i(".payment_method_cybersource_sa_sop_echeck")).find(".js-wc-payment-gateway-routing-number").val(),c=a.find(".js-wc-payment-gateway-account-number").val(),r=a.find(".js-wc-payment-gateway-drivers-license-number").val(),_=a.find(".js-wc-payment-gateway-drivers-license-state").val(),s=a.find(".js-wc-payment-gateway-check-number"),t?(9!==t.length&&n.push(wc_cybersource_sa_sop_params.routing_number_length_invalid),/\D/.test(t)&&n.push(wc_cybersource_sa_sop_params.routing_number_digits_invalid)):n.push(wc_cybersource_sa_sop_params.routing_number_missing),c?((c.length<3||17<c.length)&&n.push(wc_cybersource_sa_sop_params.account_number_length_invalid),/\D/.test(c)&&n.push(wc_cybersource_sa_sop_params.account_number_invalid)):n.push(wc_cybersource_sa_sop_params.account_number_missing),r?/^[a-zA-Z0-9 -]+$/.test(r)||n.push(wc_cybersource_sa_sop_params.drivers_license_number_invalid):n.push(wc_cybersource_sa_sop_params.drivers_license_number_missing),_||n.push(wc_cybersource_sa_sop_params.drivers_license_state_missing),0<s.size()&&(0<s.prev().find(".required").size()&&!s.val()?n.push(wc_cybersource_sa_sop_params.check_number_missing):/\D/.test(s.val())&&n.push(wc_cybersource_sa_sop_params.check_number_digits_invalid)),0<n.length?(u(e,n),!1):(a.find(".js-wc-payment-gateway-account-number").val(c),!0))},u=function(e,s){return i(".woocommerce-error, .woocommerce-message").remove(),e.prepend('<ul class="woocommerce-error"><li>'+s.join("</li><li>")+"</li></ul>"),e.removeClass("processing").unblock(),e.find(".input-text, select").blur(),i("html, body").animate({scrollTop:e.offset().top-100},1e3)},i(".js-wc-cybersource-sa-sop-echeck-account-help").click(function(){if(!i(this).closest(".payment_method_cybersource_sa_sop_echeck").find(".sample-check").is(":visible"))return i(this).closest(".payment_method_cybersource_sa_sop_echeck").find(".sample-check").slideDown()})})}).call(void 0);